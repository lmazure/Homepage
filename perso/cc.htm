<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.74 [en] (Win95; U) [Netscape]">
   <title>cartes de cr&eacute;dit</title>
<link REL=STYLESHEET TYPE="text/css" HREF="../css/standard" TITLE="standard">
<script language="JavaScript" src="../css/tools"></script>
</head>
<body>
<script language="JavaScript">
function openWindow(windowName,content) {
  var n=window.open('',windowName,'width=250,height=75,scrollbars=yes,resizable=yes');
  n.document.write('<HTML><BODY>'+content+'<BR><FORM><CENTER><INPUT TYPE="button" VALUE="Fermer la fen&ecirc;tre" ONCLICK="window.close(self)"></CENTER></FORM></BODY></HTML>');
  n.document.close();
}

function random()
{
  random.seed = (random.seed*random.a+random.c)%random.m;
  return random.seed/random.m;
}
random.m = 714025;
random.a = 4096;
random.c = 150889;
random.seed = (new Date()).getTime()%random.m;

function handleOneDigit(digit,position)
{
  if (position%2) return(digit);
  if (digit<=4) return(2*digit);
  return digit*2-9;
}

function checkValue()
{
  var str=document.check.number.value;
  var checksum=0;
  var j=1;
  for (var i=str.length-1; i>=0; i--)
  {
     var c=str.charAt(i);
     if ((c>='0')&&(c<='9'))
     {
       checksum+=handleOneDigit(c*1,j); // *1 to force cast into integer
       j++;
     }
  }
  openWindow("_checkResult",
             (checksum%10)?"Num&eacute;ro de carte invalide (la checksum est &eacute;gale &agrave; "+checksum+")"
                          :"Num&eacute;ro de carte valide");
}

function generateNumber()
{
   var checksum=8;
   var a;
   var s="4";
   for (var i=0; i<7; i++)
   {
     a=Math.floor(random()*100);
     checksum+=handleOneDigit(Math.floor(a/10),1)+handleOneDigit(a%10,0);
     s+=((a<10)?"0":"")+a;
   }
   checksum%=10;
   var c=checksum?(10-checksum):0;
   s+=c;
   openWindow("_generateNumber",s);
}
</script>
Apr&egrave;s
quelques amusements avec les sites de cartes postales (voir <a href="lagaffe.htm">ici</a>
et
<a href="lagaffe2.htm">l&agrave;</a>), je me demande ce qu'il en est
des sites demandant un num&eacute;ro de carte de cr&eacute;dit pour donner
un acc&egrave;s aux informations. Il y a
sans aucun doute des sites s&eacute;rieux (m&ecirc;me dans le porno), mais
j'ai de gros doute que cela soit la majorit&eacute;.
<p><u>Commen&ccedil;ons par &eacute;tudier les num&eacute;ros de carte
de cr&eacute;dit...</u>
<br>&nbsp;
<table BORDER CELLPADDING=4 BORDERCOLOR="#000000" >
<tr>
<td VALIGN=TOP>
<center>D&eacute;but de num&eacute;rotation</center>
</td>

<td VALIGN=TOP>
<center>Fin de num&eacute;rotation</center>
</td>

<td VALIGN=TOP>
<center>Soci&eacute;t&eacute; &eacute;mettrice</center>
</td>

<td VALIGN=TOP>
<center>Checksum</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>4000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>4999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>Visa</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>30000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>30599999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>Diners Club/Carte Blanche</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>36000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>36999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>Diners Club/Carte Blanche</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>38000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>38999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>Diners Club/Carte Blanche</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>180000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>180099999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>JCB</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>201400000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>201499999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>enRoute</div>
</td>

<td VALIGN=TOP>
<center>non</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>213100000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>213199999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>JCB</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>214900000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>214999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>enRoute</div>
</td>

<td VALIGN=TOP>
<center>non</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>340000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>349999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>American Express</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>370000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>379999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>American Express</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>3000000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>3999999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>JCB</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>4000000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>4999999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>Visa</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>5100000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>5599999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>Mastercard</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>

<tr>
<td VALIGN=TOP>
<div align=right>6011000000000000</div>
</td>

<td VALIGN=TOP>
<div align=right>6011999999999999</div>
</td>

<td VALIGN=TOP>
<div align=right>Discover</div>
</td>

<td VALIGN=TOP>
<center>oui</center>
</td>
</tr>
</table>

<p>Le calcul de la checksum est simple :
<ul>
<li>
partez du num&eacute;ro de la carte (Visa par exemple) : 4860 6778 3128
3204</li>

<li>
gardez les chiffres aux positions impaires (en commen&ccedil;ant par la
droite) : 8 0 7 8 1 8 2 4</li>

<li>
multipliez tous les chiffres aux positions paires par deux : 8 12 12 14
6 4 3 0</li>

<li>
ajoutez tous les chiffres des nombres obtenus (et non pas les nombres eux-m&ecirc;mes)
: 8+0+7+8+1+8+2+4+8+1+2+1+2+1+4+6+4+3+0 = 70</li>

<li>
le r&eacute;sultat obtenu doit &ecirc;tre divisible par 10</li>
</ul>
Simple, non ?
<p>En voici une impl&eacute;mentation, tapez un num&eacute;ro de carte
et appuyez sur le bouton pour le v&eacute;rifier.<form NAME="check" ONSUBMIT="checkValue();"><input TYPE="text" NAME="number"><input TYPE="button" VALUE="V&eacute;rifier" ONCLICK="checkValue();"></form>J'esp&egrave;re
que vous n'avez pas eu la stupidit&eacute; de taper le num&eacute;ro de
votre propre carte, sinon, il ne vous reste plus qu'&agrave; regarder le
source de cette page pour voir ce que j'en ai fait...
<p>Le seul probl&egrave;me est qu'une foultitude de sites utilisent cet
algo pour valider les num&eacute;ros de cartes de cr&eacute;dit plut&ocirc;t
que de se connecter &agrave; une banque (sans doute pour faire des &eacute;conomies,
mais je ne connais rien au sujet).
<p><u>Ensuite, faisons une petite bidouille pour g&eacute;n&eacute;rer
des num&eacute;ros al&eacute;atoires qui puissent &ecirc;tre des num&eacute;ros
de carte Visa...</u>
<p>Cliquez sur le bouton pour g&eacute;n&eacute;rer un num&eacute;ro :<form NAME="generate"><input TYPE="button" VALUE="G&eacute;n&eacute;rer" ONCLICK="generateNumber();"></form>
A vous de voir quel site tester avec ce numéro...<br>&nbsp;
<p>
<hr NOSHADE WIDTH="80%">
<p><i><font size=-1>Last update: January 28</font><sup><font size=-2>th</font></sup><font size=-1>,
2001 - <a href="javascript:do_email()">Laurent</a></font></i>
</body>
</html>

