<html>
<header>
</header>
<body onload="javascript:getData();">
<script language="javascript" type="text/javascript">


function parseBLIST(doc) {
  var e = doc.childNodes;
  for (var i=0; i<e.length; i++) {
      if (e[i].nodeName == "ITEM") {
          var e2 = e[i].childNodes;
          for (var j=0; j<e2.length; j++) {
              if (e2[j].nodeName == "BLIST") {
                  parseBLIST(e2[j]);
              } else if (e2[j].nodeName == "X") {
                  var e3 = e2[j].getElementsByTagName("T");
                  alert(e3[0].firstChild.nodeValue);
              }
          }
      }
   }
}

function build(doc) {
  var e1 = doc.getElementsByTagName("CONTENT");
  var e2 = e1[0].getElementsByTagName("BLIST");
  parseBLIST(e2[0]);
}

function parseAnswer() {
  if (request.readyState == 4) {
    if ( (request.status == 0) || // if we are working on the local filesystem
         (request.status == 200) )  {
      build(request.responseXML);
    }
  }
}

var request = false;
try {
  request = new XMLHttpRequest();
} catch (trymicrosoft) {
  try {
    request = new ActiveXObject("Msxml2.XMLHTTP");
  } catch (othermicrosoft) {
    try {
      request = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (failed) {
      request = false;
    }
  }
}

if (!request)
  alert("Error initializing XMLHttpRequest!");

function getData() {
    request.open("GET", "map.xml", true);
    request.onreadystatechange = parseAnswer;
    request.send(null);
} 
</script>
</body>
</html>
